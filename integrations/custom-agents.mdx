---
title: "Custom Agents"
description: "Integrate Surf Data with any MCP-compatible agent or build your own"
---

## Overview

Surf Data's MCP endpoint is compatible with any client that supports the **Model Context Protocol**. You can integrate with existing agent frameworks, custom-built agents, or automation platforms.

## MCP endpoint

```
POST https://app.surfdata.io/mcp/http
```

Authentication:
```
Authorization: Bearer sk_live_your-token-here
Content-Type: application/json
```

## Protocol

Surf Data uses **JSON-RPC 2.0** over HTTP. Every request and response follows this format:

### Request

```json
{
  "jsonrpc": "2.0",
  "method": "method_name",
  "params": {},
  "id": 1
}
```

### Response

```json
{
  "jsonrpc": "2.0",
  "result": {},
  "id": 1
}
```

## Available methods

### Initialize

Handshake with the MCP server. Call this first to get server capabilities.

```json
{
  "jsonrpc": "2.0",
  "method": "initialize",
  "params": {
    "protocolVersion": "2024-11-05",
    "capabilities": {},
    "clientInfo": {
      "name": "my-agent",
      "version": "1.0.0"
    }
  },
  "id": 1
}
```

**Response:**

```json
{
  "jsonrpc": "2.0",
  "result": {
    "protocolVersion": "2024-11-05",
    "capabilities": {
      "tools": {}
    },
    "serverInfo": {
      "name": "surf-data-mcp",
      "version": "1.0.0"
    }
  },
  "id": 1
}
```

### List tools

Discover available tools and their input schemas.

```json
{
  "jsonrpc": "2.0",
  "method": "tools/list",
  "id": 2
}
```

**Response:**

```json
{
  "jsonrpc": "2.0",
  "result": {
    "tools": [
      {
        "name": "get_customer_by_id",
        "description": "Retrieves customer details by their ID",
        "inputSchema": {
          "type": "object",
          "properties": {
            "customer_id": {
              "type": "string",
              "description": "The unique customer identifier"
            }
          },
          "required": ["customer_id"]
        }
      }
    ]
  },
  "id": 2
}
```

### Call a tool

Execute a tool with arguments.

```json
{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "params": {
    "name": "get_customer_by_id",
    "arguments": {
      "customer_id": "12345"
    }
  },
  "id": 3
}
```

**Response:**

```json
{
  "jsonrpc": "2.0",
  "result": {
    "content": [
      {
        "type": "text",
        "text": "[{\"id\": \"12345\", \"name\": \"Jo√£o Silva\", \"email\": \"j***@example.com\", \"plan\": \"growth\"}]"
      }
    ]
  },
  "id": 3
}
```

### Ping

Health check endpoint.

```json
{
  "jsonrpc": "2.0",
  "method": "ping",
  "id": 4
}
```

## Integration examples

### Python with MCP SDK

```python
from mcp import ClientSession
from mcp.client.streamable_http import streamablehttp_client

async def main():
    headers = {"Authorization": "Bearer sk_live_your-token-here"}

    async with streamablehttp_client(
        "https://app.surfdata.io/mcp/http",
        headers=headers
    ) as (read, write, _):
        async with ClientSession(read, write) as session:
            await session.initialize()

            # List available tools
            tools = await session.list_tools()
            print(f"Available tools: {[t.name for t in tools.tools]}")

            # Call a tool
            result = await session.call_tool(
                "get_customer_by_id",
                arguments={"customer_id": "12345"}
            )
            print(result)
```

### Node.js with fetch

```javascript
async function callMCP(method, params = {}) {
  const response = await fetch('https://app.surfdata.io/mcp/http', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer sk_live_your-token-here'
    },
    body: JSON.stringify({
      jsonrpc: '2.0',
      method,
      params,
      id: Date.now()
    })
  });
  return response.json();
}

// List tools
const tools = await callMCP('tools/list');
console.log(tools.result.tools);

// Call a tool
const result = await callMCP('tools/call', {
  name: 'get_customer_by_id',
  arguments: { customer_id: '12345' }
});
console.log(result.result);
```

### cURL

```bash
# Initialize
curl -X POST https://app.surfdata.io/mcp/http \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk_live_your-token-here" \
  -d '{
    "jsonrpc": "2.0",
    "method": "initialize",
    "params": {
      "protocolVersion": "2024-11-05",
      "capabilities": {},
      "clientInfo": {"name": "curl-test", "version": "1.0.0"}
    },
    "id": 1
  }'

# List tools
curl -X POST https://app.surfdata.io/mcp/http \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk_live_your-token-here" \
  -d '{"jsonrpc": "2.0", "method": "tools/list", "id": 2}'

# Call a tool
curl -X POST https://app.surfdata.io/mcp/http \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk_live_your-token-here" \
  -d '{
    "jsonrpc": "2.0",
    "method": "tools/call",
    "params": {
      "name": "get_customer_by_id",
      "arguments": {"customer_id": "12345"}
    },
    "id": 3
  }'
```

## Error handling

MCP errors follow the JSON-RPC 2.0 error format:

```json
{
  "jsonrpc": "2.0",
  "error": {
    "code": -32600,
    "message": "Invalid token"
  },
  "id": 1
}
```

### Common error codes

| Code | Message | Cause |
|------|---------|-------|
| `-32600` | Invalid token | Token is invalid, expired, or revoked |
| `-32601` | Method not found | Unknown MCP method |
| `-32602` | Invalid params | Missing or invalid parameters |
| `-32603` | Internal error | Server-side error |
| `-32001` | Limit reached | Monthly execution limit exceeded |
| `-32002` | Tool not found | The requested tool doesn't exist |
| `-32003` | Query blocked | Destructive SQL detected |
