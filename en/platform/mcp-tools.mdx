---
title: "MCP Tools"
description: "Create parameterized SQL functions that AI agents can call"
---

## Overview

**MCP Tools** are the core building block of Surf Data. They define callable functions that AI agents can discover and execute via the Model Context Protocol. Each tool wraps a parameterized SQL query and exposes it as a structured function.

## Creating a tool

<Steps>
  <Step title="Select a view">
    Every tool must be linked to an [Agent View](/en/platform/agent-views). Select or create a view first.
  </Step>
  <Step title="Create a new tool">
    Click **New Tool** in the tools section of the left sidebar.
  </Step>
  <Step title="Define the tool">
    Fill in the tool configuration:

    | Field | Required | Description |
    |-------|----------|-------------|
    | Name | Yes | Function name agents call (e.g., `get_customer_by_id`) |
    | Description | Yes | Human-readable explanation of what the tool does |
    | SQL Query | Yes | Parameterized SQL template |
    | View | Yes | Linked Agent View |
    | Datasource | No | Datasource override (defaults to view's datasource) |
  </Step>
  <Step title="Add parameters">
    Define input parameters using `{parameter_name}` syntax in your SQL query:

    ```sql
    SELECT id, name, email, plan
    FROM customers
    WHERE id = {customer_id}
    ```

    Then add the parameter definition:

    | Property | Description |
    |----------|-------------|
    | Name | Parameter name matching the `{placeholder}` |
    | Type | `string`, `number`, `boolean`, or `date` |
    | Required | Whether the parameter must be provided |
    | Description | Explanation for the AI agent |
  </Step>
  <Step title="Test the tool">
    Add test values for each parameter and click **Test Run**. The results panel shows:
    - The substituted SQL query
    - Returned rows
    - Execution time
    - Error messages (if any)
  </Step>
  <Step title="Save">
    Click **Save** to store the tool configuration.
  </Step>
</Steps>

## Parameter syntax

Surf Data uses `{parameter_name}` syntax for query parameterization. Parameters are safely substituted with SQL escaping to prevent injection.

### Examples

**Single parameter:**
```sql
SELECT * FROM customers WHERE id = {customer_id}
```

**Multiple parameters:**
```sql
SELECT * FROM orders
WHERE customer_id = {customer_id}
  AND status = {order_status}
  AND created_at >= {start_date}
```

**LIKE patterns:**
```sql
SELECT * FROM customers
WHERE name LIKE '%' || {search_term} || '%'
```

### Supported parameter types

| Type | Description | Example value |
|------|-------------|---------------|
| `string` | Text value, automatically quoted | `"john@example.com"` |
| `number` | Numeric value, no quoting | `42` |
| `boolean` | True or false | `true` |
| `date` | Date or datetime string | `"2024-01-15"` |

## Security policies

Tools support optional **security policies** for data masking:

1. Toggle **Policy Enabled** on the tool configuration
2. Write policy code that transforms the query results
3. Common use cases:
   - Mask email addresses (`john@example.com` â†’ `j***@example.com`)
   - Redact phone numbers
   - Truncate sensitive fields

See [Data Masking](/en/security/data-masking) for detailed policy configuration.

## Tool JSON schema

When agents call `tools/list`, each tool is returned as a JSON schema:

```json
{
  "name": "get_customer_by_id",
  "description": "Retrieves customer details by their ID",
  "inputSchema": {
    "type": "object",
    "properties": {
      "customer_id": {
        "type": "string",
        "description": "The unique customer identifier"
      }
    },
    "required": ["customer_id"]
  }
}
```

You can preview this schema in the tool editor by switching to the **JSON View** tab.

## Query safety

Surf Data enforces strict query safety rules. The following SQL patterns are **blocked**:

| Pattern | Example |
|---------|---------|
| `DROP` | `DROP TABLE customers` |
| `TRUNCATE` | `TRUNCATE TABLE orders` |
| `DELETE` | `DELETE FROM customers` |
| `UPDATE` | `UPDATE customers SET ...` |
| `INSERT` | `INSERT INTO customers ...` |
| `ALTER` | `ALTER TABLE customers ...` |
| `CREATE` | `CREATE TABLE ...` |
| `GRANT` | `GRANT SELECT ON ...` |
| `REVOKE` | `REVOKE SELECT ON ...` |

Additionally, all SELECT queries are automatically capped with `LIMIT 100` if no limit is specified, ensuring bounded result sets.

## Best practices

<AccordionGroup>
  <Accordion title="Use descriptive tool names">
    Name tools as actions with clear verbs: `get_customer_by_id`, `search_orders_by_date`, `list_active_subscriptions`.
  </Accordion>

  <Accordion title="Write detailed descriptions">
    Agents use the description to decide when to call a tool. Be specific about what it returns, expected inputs, and any limitations.

    **Good:** "Retrieves customer details including name, email, and subscription plan by their unique ID. Returns a single row or empty result."

    **Bad:** "Gets a customer"
  </Accordion>

  <Accordion title="Mark required parameters">
    Always mark essential parameters as required. Optional parameters should have sensible defaults in your SQL (e.g., using `COALESCE`).
  </Accordion>

  <Accordion title="Test before publishing">
    Always test your tool with realistic parameter values before publishing. Check for:
    - Correct results
    - Reasonable execution times
    - Proper error handling for edge cases
  </Accordion>
</AccordionGroup>
